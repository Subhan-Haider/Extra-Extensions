<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Dark Mode Controller</title>
    <style>
        :root {
            --accent: #8b5cf6;
            --bg: #09090b;
            --text: #fafafa;
        }

        body {
            width: 260px;
            padding: 20px;
            background: var(--bg);
            color: var(--text);
            font-family: 'Inter', sans-serif;
        }

        h1 {
            font-size: 1.1rem;
            margin-bottom: 20px;
            text-align: center;
        }

        .control-row {
            margin-bottom: 15px;
        }

        .control-row label {
            display: block;
            font-size: 0.75rem;
            color: #a1a1aa;
            margin-bottom: 5px;
        }

        input[type="range"] {
            width: 100%;
            accent-color: var(--accent);
        }

        .toggle-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #27272a;
        }

        .btn {
            width: 100%;
            background: var(--accent);
            color: white;
            border: none;
            padding: 10px;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <h1>Vision <span style="color:var(--accent);">Care</span></h1>

    <div class="toggle-row">
        <span>Force Dark Mode</span>
        <input type="checkbox" id="dark-toggle">
    </div>

    <div class="control-row">
        <label>Brightness</label>
        <input type="range" id="brightness" min="50" max="150" value="100">
    </div>

    <div class="control-row">
        <label>Contrast</label>
        <input type="range" id="contrast" min="50" max="150" value="100">
    </div>

    <button id="save" class="btn">Apply Locally</button>

    <script>
        const host = new URL(window.location.href).hostname;
        document.getElementById('save').onclick = async () => {
            const settings = {
                dark: document.getElementById('dark-toggle').checked,
                brightness: document.getElementById('brightness').value,
                contrast: document.getElementById('contrast').value
            };
            await chrome.storage.local.set({ [host]: settings });
            const [tab] = await chrome.tabs.query({ active: true, currentWindow: true });
            chrome.scripting.executeScript({ target: { tabId: tab.id }, files: ['apply.js'] });
        };
    </script>
</body>

</html>